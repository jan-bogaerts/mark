# MarkdownCode > components > main window
[]
# MarkdownCode > components > toolbar
[]
# MarkdownCode > components > toolbar > home
[{"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}]
# MarkdownCode > components > toolbar > home > file section
[{"class_name": "DialogService", "value": "", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "UndoService", "value": "- The project's undo-service has data in the undo list, which is checked before creating a new project.\n- The undo service has undo data, which is used to enable the 'save' button when the project service has a filename for the project and the project has changed since the last save.\n- The undo service has undo data, which is used to enable the 'save as' button when the project has changed since the last save.\n- The undo service needs to be monitored for changes so that the state of the buttons can be updated.", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "ProjectService", "value": "- The project service has a filename for the project.\n- The project service is asked to update the auto-save state.\n- The toggle button's state follows that of the project service's auto-save state.", "source": "# MarkdownCode > services > project service"}, {"class_name": "StorageService", "value": "- `storageService.new()`: This is called when creating a new project.\n- Asking the storage-service to load a file: This happens when a file is selected to open an existing project.\n- Calling the storage-service 'save' function with filename as param: This happens when the user provides a valid filename to save the current project.\n- Calling storage-service save without param: This happens when the project service already has a filename to save the current project.\n- Asking the storage-service to save the project to a new location: This happens when the user selects a file to save the current project to a new location.", "source": "# MarkdownCode > services > project service > storage service"}]
# MarkdownCode > components > toolbar > home > edit section
[{"class_name": "SelectionService", "value": "- Cut: a button to initiate the cut command of the selection service, enabled when the selection service has any data marked as selected.\n- Copy: a button to initiate the copy command of the selection service, enabled when the selection service has any data marked as selected.\n- Paste: a button to initiate the paste command of the selection service, enabled when the clipboard contains text data.\n- Delete: a button to initiate the delete command of the selection service, enabled when the selection service has any data marked as selected.\n- Clear selection: a button to clear the current selection buffer, enabled when the selection service has any data marked as selected.", "source": "# MarkdownCode > services > Selection service"}]
# MarkdownCode > components > toolbar > home > undo section
[{"class_name": "UndoService", "value": "- The undo-section component contains actions that the undo / redo service can perform.\n- Undo: a button to undo the last action, performed by the current project's undo-service\n  - Enabled when the project's undo-service has undo actions\n- Redo: a button to redo the last action, preformed by the project's undo service.\n  - Enabled when the undo-service has redo actions", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "ThemeService", "value": "", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "StorageService", "value": "", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "ConstantExtractorService", "value": "", "source": "# MarkdownCode > services > constant-extractor service"}]
# MarkdownCode > components > toolbar > home > build section
[{"class_name": "BuildService", "value": "- The build-section component contains actions that the build-service can perform.\n- The build-service has a function `buildAll()` which is called when the 'all' button is clicked.\n- The build-service has a function `buildFragment(positionTrackingService.activeFragment)` which is called when the 'code for active fragment' button is clicked.\n- The build-service has a function `runTransformer(positionTrackingService.activeFragment, positionTrackingService.activeTransformer)` which is called when the 'active fragment with active transformer' button is clicked.\n- The build-service can update the debug state when the 'debug' button is pressed.\n- The toggle button's state follows that of the build-service's debug state.", "source": "# MarkdownCode > services > build service"}, {"class_name": "PositionTrackingService", "value": "- `positionTrackingService.activeFragment?.isOutOfDate` is used to determine if the \"code for active fragment\" button is disabled.\n- `build-service.buildFragment(positionTrackingService.activeFragment)` is called when the \"code for active fragment\" button is clicked.\n- `positionTrackingService.activeFragment && positionTrackingService.activeTransformer && !positionTrackingService.activeFragment.isOutOfDate || !positionTrackingService.activeTransformer.cache.isOutOfDate(positionTrackingService.activeFragment.key)` is used to determine if the \"active fragment with active transformer\" button is disabled.\n- `build-service.runTransformer(positionTrackingService.activeFragment, positionTrackingService.activeTransformer)` is called when the \"active fragment with active transformer\" button is clicked.\n- Event handlers are registered to monitor for changes with position-tracking service (field: eventTarget, event: change) to update the disabled state of the buttons.", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "ProjectService", "value": "- project-service.isAnyFragmentOutOfDate() is used to determine if the 'all' button is disabled.\n- project-service is monitored for changes with the event 'fragment-out-of-date' to update the disabled state of the buttons.", "source": "# MarkdownCode > services > project service"}]
# MarkdownCode > components > toolbar > format
[]
# MarkdownCode > components > toolbar > format > style section
[{"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "SelectionService", "value": "- The selection-service is used to assign a different formatting style to the currently selected text when a button is pressed.\n- The selection-service is monitored for changes in the currently selected text.\n- Whenever the text selection is changed, the state of the toggle buttons is updated to reflect the style of the currently selected text.\n- The selection service provides a method for retrieving the style of the currently selected text.", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "PositionTrackingService", "value": "", "source": "# MarkdownCode > services > position-tracking service"}]
# MarkdownCode > components > toolbar > format > paragraph section
[{"class_name": "SelectionService", "value": "- The SelectionService performs the action of increasing the indent of the current line or selection.\n- The SelectionService performs the action of decreasing the indent of the current line or selection.", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}]
# MarkdownCode > components > toolbar > format > font section
[{"class_name": "SelectionService", "value": "- The text selection is changed in the selection-service.\n- The state of the toggle buttons is updated to reflect the state of the selected text when the text selection is changed in the selection-service.", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "PositionTrackingService", "value": "", "source": "# MarkdownCode > services > position-tracking service"}]
# MarkdownCode > components > toolbar > preferences
[]
# MarkdownCode > components > toolbar > preferences > GPT section
[{"class_name": "DialogService", "value": "", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "PositionTrackingService", "value": "", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "GptService", "value": "- The GPT-section component contains actions related to the configuration of the GPT service.\n- The list of available models used to populate the combobox comes from the gpt-service.\n- The initial value for the combobox is obtained from the gpt-service.\n- When the value is changed, it is saved to the gpt-service.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "CompressService", "value": "", "source": "# MarkdownCode > services > compress service"}, {"class_name": "ThemeService", "value": "", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "GPTService", "value": "- The GPT-section component contains actions related to the configuration of the GPT service.\n- The list of available models used to populate the ModelComboBox component comes from the gpt-service.\n- The initial value for the ModelComboBox component is gotten from the gpt-service (getDefaultModel function).\n- When the value of the ModelComboBox component is changed, it is saved to the gpt-service (setDefaultModel function).", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "TransformerBaseService", "value": "", "source": "# MarkdownCode > services > transformer-base service"}, {"class_name": "StorageService", "value": "", "source": "# MarkdownCode > services > project service > storage service"}]
# MarkdownCode > components > toolbar > preferences > open-ai configuration dialog
[{"class_name": "DialogService", "value": "", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "GptService", "value": "- The current value of the api-key is retrieved from the gpt-service and shown in the input box when the dialog box opens.\n- The new api-key value is saved to the gpt-service when the 'ok' button is clicked.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "GPTService", "value": "- The current value of the api-key is retrieved from the gpt-service when the dialog box opens.\n- The new api-key value is saved to the gpt-service when the 'ok' button is clicked.", "source": "# MarkdownCode > services > gpt service"}]
# MarkdownCode > components > toolbar > preferences > view section
[{"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "ThemeService", "value": "- ThemeService manages the currently selected theme.\n- The preferred color mode (light or dark) is linked to the value of the ThemeService.\n- The selected font for the markdown text is linked to the value of the ThemeService.\n- The selected font size for the markdown text is also linked to the value of the ThemeService.", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "FolderService", "value": "", "source": "# MarkdownCode > services > folder service"}, {"class_name": "ConstantExtractorService", "value": "", "source": "# MarkdownCode > services > constant-extractor service"}]
# MarkdownCode > components > body
[{"class_name": "PositionTrackingService", "value": "", "source": "# MarkdownCode > services > position-tracking service"}]
# MarkdownCode > components > body > horizontal splitter
[]
# MarkdownCode > components > body > vertical splitter
[]
# MarkdownCode > components > body > editor
[{"class_name": "DialogService", "value": "- In the event of an error during the handling of model content changes in the monaco editor, the DialogService is used to display an error dialog. The relevant code is `dialogService.showErrorDialog(e)`.", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "ThemeService", "value": "- Theme (light or dark), font & font-size are retrieved from the theme-service and applied to the monaco editor.", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "SelectionService", "value": "- onDidFocusEditorWidget: store a reference to the monaco editor in the selection service to indicate so that it can work with the correct editor.\n- onDidBlurEditorWidget: if the selection service currently references this monaco editor, assign null to the selection service's editor reference.\n- onDidChangeCursorPosition: if the selection service currently references this monaco editor, update the position-tracking service with the new cursor position\n- onDidChangeCursorSelection: if the selection service currently references this monaco editor, inform the subscribers of the selection-service that the selection has changed", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "PositionTrackingService", "value": "- onDidChangeCursorPosition: if the selection service currently references this monaco editor, update the position-tracking service with the new cursor position", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "ChangeProcessorService", "value": "- The ChangeProcessorService is used to process changes in the monaco editor. This is triggered by the 'onDidChangeModelContent' event. The changes and the current value of the editor are passed to the 'process' method of the ChangeProcessorService.", "source": "# MarkdownCode > services > project service > change-processor service"}, {"class_name": "ProjectService", "value": "- The text for the monaco editor is retrieved from the project service (`projectService.content`).\n- Whenever the project service triggers the 'content-changed' event, the editor will reload the text.\n- Register using `projectService.eventTarget.addEventListener('content-changed', handleContentChanged)`.", "source": "# MarkdownCode > services > project service"}]
# MarkdownCode > components > body > outline
[{"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "LineParserHelpers", "value": "", "source": "# MarkdownCode > services > line parser > line parser helpers"}, {"class_name": "FolderService", "value": "", "source": "# MarkdownCode > services > folder service"}, {"class_name": "CompressService", "value": "", "source": "# MarkdownCode > services > compress service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "ProjectService", "value": "- The project-service raises the 'content-changed' event to indicate that a new project was loaded.\n- The project data is retrieved from the project-service and converted into a tree structure using the function 'convertToTreeData'.\n- The project service raises an event that a data item was removed (event: fragment-deleted).\n- The project service raises an event that a data item was added (fragment-inserted) or (multiple) item(s) were changed (the event 'key-changed').\n- The component registers to the project service using `projectService.subscribe('content-changed', handleContentChanged)`.", "source": "# MarkdownCode > services > project service"}, {"class_name": "LineParser", "value": "", "source": "# MarkdownCode > services > line parser"}, {"class_name": "PositionTrackingService", "value": "- When the user selects a tree item, the key of the first selected item is assigned to the position-tracking service's activeFragment.\n- This component monitors the position-tracking service for changes to the currently selected text-fragment.\n- Use `positionTrackingService.subscribe(eventHandler)` to attach the event handler.\n- When the position changes, set the tree's selectedKeys property to the key of the selected text-fragment so that the corresponding tree node becomes selected.", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "StorageService", "value": "", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "ChangeProcessorService", "value": "", "source": "# MarkdownCode > services > project service > change-processor service"}]
# MarkdownCode > components > body > results view
[{"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "CybertronService", "value": "- The transformers are registered with the CybertronService.\n- The CybertronService provides a list of transformers.\n- The user can view the results generated by the transformers registered with the CybertronService.", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "TransformerBaseService", "value": "", "source": "# MarkdownCode > services > transformer-base service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "BuildStackService", "value": "", "source": "# MarkdownCode > services > build-stack service"}]
# MarkdownCode > components > body > results view > results view tab
[{"class_name": "ThemeService", "value": "- theme (light or dark), font & font-size are retrieved from the theme-service and applied to the monaco editor.", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "SelectionService", "value": "- When the results-view-tab is loaded, a reference to the monaco editor is stored in the selection service to indicate so that it can work with the correct editor.\n- The selection service's editor reference is set to null when the monaco editor is blurred.\n- The selection service is informed about changes in cursor selection if it currently references the monaco editor.\n- The selection service is used to monitor changes in the currently selected text-fragment.", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "PositionTrackingService", "value": "- The 'PositionTrackingService' is used to track the active transformer in the 'onDidFocusEditorWidget' event of the monaco editor.\n- The component monitors the 'PositionTrackingService' (field: eventTarget, event: change) for changes to the currently selected text-fragment.", "source": "# MarkdownCode > services > position-tracking service"}]
# MarkdownCode > components > body > results view > results view context menu
[{"class_name": "DialogService", "value": "", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "GptService", "value": "- The gpt-service provides a list of available models for the menu items in the 'model for all' and 'model for fragment' options.\n- The gpt-service is used to get the value for the current model, registered under the name of the current transformer.\n- The gpt-service is asked to update the model-name of the transformer related to the results-view when another model is selected.\n- The gpt-service is used to get the value for the current model, registered under the name of the current transformer and current key.\n- The gpt-service is asked to update the model-name of the transformer and the current title when another model is selected.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "ThemeService", "value": "", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "LineParser", "value": "", "source": "# MarkdownCode > services > line parser"}, {"class_name": "PositionTrackingService", "value": "", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "ResultCacheService", "value": "", "source": "# MarkdownCode > services > result-cache service"}, {"class_name": "CompressService", "value": "", "source": "# MarkdownCode > services > compress service"}, {"class_name": "FolderService", "value": "", "source": "# MarkdownCode > services > folder service"}, {"class_name": "GPTService", "value": "- The gpt-service provides the sub menu items which are a list of available models fetched from the internet.\n- The gpt-service is asked to update the model-name of the transformer related to the results-view when another model is selected.\n- The current model value, registered under the name of the current transformer, is obtained from the gpt-service.\n- The gpt-service is asked to update the model-name of the transformer and the current title when another model is selected for a fragment.\n- The current model value, registered under the name of the current transformer and current key, is obtained from the gpt-service.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "CybertronService", "value": "", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "TransformerBaseService", "value": "", "source": "# MarkdownCode > services > transformer-base service"}, {"class_name": "ChangeProcessorService", "value": "", "source": "# MarkdownCode > services > project service > change-processor service"}, {"class_name": "BuildStackService", "value": "", "source": "# MarkdownCode > services > build-stack service"}, {"class_name": "ConstantExtractorService", "value": "", "source": "# MarkdownCode > services > constant-extractor service"}]
# MarkdownCode > services > dialog service
[]
# MarkdownCode > services > Theme service
[]
# MarkdownCode > services > project service
[{"class_name": "DialogService", "value": "- In the function `tryAddToOutOfDate(key, transformer)`, `dialogService.showError('Unknown key: ' + key)` is used when the fragment with the specified key is not found.", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "CybertronService", "value": "The source text mentions 'CybertronService' in the context of the 'tryAddToOutOfDate' function. Specifically, it checks if the length of 'fragment.outOfDateTransformers' is equal to the length of 'cybertronService.tranformers'. If they are equal, it means the fragment just became fully out-of-date.", "source": "# MarkdownCode > services > cybertron service"}]
# MarkdownCode > services > project service > storage service
[{"class_name": "FolderService", "value": "- `folderService.clear()`: This function is called to clear the folder service.\n- `folderService.setLocation(filePath)`: This function is used to set the location of the folder service with the given file path.\n- `folderService.moveTo(file)`: This function is used to move the folder service to a specified file.\n- `folderService.copyTo(file)`: This function is used to copy the folder service to a specified file.", "source": "# MarkdownCode > services > folder service"}, {"class_name": "CybertronService", "value": "- In the clear() function, for each transformer in cybertronService.transformers, the cache is cleared.\n- In the open(filePath) function, for each transformer in cybertronService.transformers, the cache is loaded from a file.\n- In the updateOutOfDate() function, for each transformer in cybertronService.transformers, it checks if the transformer cache is out of date. If all transformers are out of date, the fragment is marked as fully out-of-date. If some transformers are out of date, they are added to the fragment's outOfDateTransformers list.\n- In the save(file) function, for each transformer in cybertronService.transformers, the cache is saved to a file.", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "PositionTrackingService", "value": "The source text does not provide any information specifically related to 'PositionTrackingService'.", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "ProjectService", "value": "- projectService.textFragments: An array that stores text fragments.\n- projectService.content: A string that stores the content of the project.\n- projectService.eventTarget.dispatchEvent('content-changed'): A function that dispatches an event when the content changes.\n- projectService.markOutOfDate(fragment): A function that marks a fragment as out-of-date.\n- projectService.autoSave: A boolean that indicates whether the project should be auto-saved.\n- projectService.filename: A string that stores the filename of the project.\n- this.save(projectService.filename): A function that saves the project.", "source": "# MarkdownCode > services > project service"}, {"class_name": "LineParser", "value": "- lineParser.clear() is called in the clear() function to clear the LineParser.\n- lineParser.parse(line, index) is called in the open(filePath) function to parse each line of the content.", "source": "# MarkdownCode > services > line parser"}]
# MarkdownCode > services > project service > change-processor service
[{"class_name": "LineParser", "value": "- lineParser.parse(lines[lineIdx], curLine): This function is used to parse the lines that are overwritten.\n- lineParser.deleteLine(curLine): This function is used to delete lines.\n- LineParser.insert(line, index): This function is used to insert lines.", "source": "# MarkdownCode > services > line parser"}, {"class_name": "ProjectService", "value": "- content: field that stores the raw full text", "source": "# MarkdownCode > services > project service"}, {"class_name": "StorageService", "value": "- storageService.markDirty()", "source": "# MarkdownCode > services > project service > storage service"}]
# MarkdownCode > services > folder service
[{"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "StorageService", "value": "", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "ChangeProcessorService", "value": "", "source": "# MarkdownCode > services > project service > change-processor service"}, {"class_name": "ConstantExtractorService", "value": "", "source": "# MarkdownCode > services > constant-extractor service"}]
# MarkdownCode > services > Selection service
[]
# MarkdownCode > services > Undo service
[]
# MarkdownCode > services > line parser
[{"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "LineParserHelpers", "value": "- lineParserHelpers.handleEmptyLine: a function that is called when the parsed line is empty. It takes as parameters the line-parser service and the index of the line.\n- lineParserHelpers.handleTitleLine: a function that is called when the parsed line starts with '#'. It takes as parameters the line-parser service, the line itself, and the index of the line.\n- lineParserHelpers.handleRegularLine: a function that is called when the parsed line is a regular line (not empty and doesn't start with '#'). It takes as parameters the line-parser service, the line itself, and the index of the line.", "source": "# MarkdownCode > services > line parser > line parser helpers"}, {"class_name": "FolderService", "value": "", "source": "# MarkdownCode > services > folder service"}, {"class_name": "CompressService", "value": "", "source": "# MarkdownCode > services > compress service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "ProjectService", "value": "- The project-service stores the text-fragments updated by the line-parser service.\n- The line-parser service asks the project-service to add the text-fragment in its list of text-fragments using the method projectService.addTextFragment(textFragment, index).\n- The calculateKey function in the line-parser service uses the project-service to get the text-fragment at a certain position 'idx'.", "source": "# MarkdownCode > services > project service"}, {"class_name": "StorageService", "value": "", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "ChangeProcessorService", "value": "", "source": "# MarkdownCode > services > project service > change-processor service"}, {"class_name": "BuildStackService", "value": "", "source": "# MarkdownCode > services > build-stack service"}, {"class_name": "ConstantExtractorService", "value": "", "source": "# MarkdownCode > services > constant-extractor service"}]
# MarkdownCode > services > line parser > line parser helpers
[{"class_name": "ProjectService", "value": "- projectService.eventTarget.dispatchEvent('key-changed', eventParams)\n- projectService.textFragments.indexOf(fragment)\n- projectService.deleteTextFragment(fragment)\n- projectService.markOutOfDate(prevFragment)\n- projectService.markOutOfDate(fragment)\n- projectService.textFragments.length", "source": "# MarkdownCode > services > project service"}]
# MarkdownCode > services > position-tracking service
[{"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "LineParser", "value": "- the line-parser service's fragmentsIndex array is used to get the object at the line-index position when setting a new currently selected line.", "source": "# MarkdownCode > services > line parser"}]
# MarkdownCode > services > gpt service
[]
# MarkdownCode > services > result-cache service
[{"class_name": "FolderService", "value": "- the location of the file (folder) is provided by folder-service.cache", "source": "# MarkdownCode > services > folder service"}, {"class_name": "CybertronService", "value": "", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "ProjectService", "value": "- ProjectService is used to register the event handler 'handleKeyChanged' to monitor when the key of a fragment changes. This is done using the pseudo code: `projectService.eventTarget.addEventListener('fragment-deleted', handleKeyChanged)`\n- ProjectService is used to register the event handler 'handleFragmentDeleted' to monitor when a fragment is deleted. This is done using the pseudo code: `projectService.eventTarget.addEventListener('key-changed', handleFragmentDeleted)`\n- ProjectService is used to register an event handler to monitor when text fragments have changed. This is done using the pseudo code: `projectService.eventTarget.addEventListener('fragment-out-of-date', handleTextFragmentChanged)`\n- The function 'tryAddToOutOfDate' of the ProjectService is called within the event handler when it is triggered. The pseudo code for this is: `projectService.tryAddToOutOfDate(fragmentKey, this.transformer)`", "source": "# MarkdownCode > services > project service"}]
# MarkdownCode > services > build service
[{"class_name": "CybertronService", "value": "The source text does not provide any information specifically related to 'CybertronService'.", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "TransformerBaseService", "value": "", "source": "# MarkdownCode > services > transformer-base service"}, {"class_name": "CompressService", "value": "", "source": "# MarkdownCode > services > compress service"}, {"class_name": "BuildStackService", "value": "", "source": "# MarkdownCode > services > build-stack service"}, {"class_name": "ProjectService", "value": "The source text mentions that the build service processes all the text-fragments of the project-service. It also mentions that for each text-fragment in project-service.data-list, the build service performs `this.buildFragment(text-fragment)`.", "source": "# MarkdownCode > services > project service"}]
# MarkdownCode > services > build-stack service
[{"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}]
# MarkdownCode > services > cybertron service
[{"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "BuildStackService", "value": "", "source": "# MarkdownCode > services > build-stack service"}]
# MarkdownCode > services > transformer-base service
[{"class_name": "CompressService", "value": "", "source": "# MarkdownCode > services > compress service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "BuildStackService", "value": "- In the function `get-result(key)`, `buildStackService.tryRegister(this.name, fragment.key)` is used to prevent circular references.\n- In the same function, `buildStackService.unregister(this, fragment.key)` is used to unregister the current object and key from the `buildStackService`.", "source": "# MarkdownCode > services > build-stack service"}, {"class_name": "ResultCacheService", "value": "- The transformer-base service uses a result-cache-service (field: cache) to store all the results and keep track of when the build has gone out-of-date.\n  - constructor params:\n    - transformer-name = this.name\n    - dependencies = this.dependencies\n- Functions:\n  - render-result(pseudo):\n    ```python (pseudo)\n    def renderResult(textFragment):\n      message, keys = await this.buildMessage(textFragment)\n      result = await GPT-service.sendRequest(this.name, textFragment.key, message) # need name and key so the gpt service can select the correct model\n      key = ' | '.join(keys)\n      this.cache.setResult(key, result)\n      return result\n    ```\n  - get-result(key): get an up-to-date result value for the specified key. Use the cache when possible.\n    ```python (pseudo)\n    async def getResult(fragment):\n      if not this.cache.isOutOfDate(fragment.key):\n        return this.cache.getFragmentResults(fragment.key)\n      if not buildStackService.tryRegister(this.name, fragment.key):\n        return # circular reference, not good, stop the process\n      try:\n        result = await this.renderResult(fragment)\n        return result\n      finally:\n        buildStackService.unregister(this, fragment.key)\n    ```", "source": "# MarkdownCode > services > result-cache service"}]
# MarkdownCode > services > compress service
[{"class_name": "CybertronService", "value": "- register the global instance of the service as an entry-point transformer with the cybertron-service: `cybertronService.register(this, true)`", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "TransformerBaseService", "value": "- The compress service inherits from transformer-base service.\n- Constructor parameters for TransformerBaseService:\n  - name: 'compress'\n  - dependencies: ['constants']\n  - isJson: false\n- The global instance of the service is registered as an entry-point transformer with the cybertron-service: `cybertronService.register(this, true)`", "source": "# MarkdownCode > services > transformer-base service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "ConstantExtractorService", "value": "", "source": "# MarkdownCode > services > constant-extractor service"}]
# MarkdownCode > services > constant-extractor service
[{"class_name": "TransformerBaseService", "value": "- Inherits from transformer-base service\n- Constructor parameters:\n  - name: 'constants'\n  - dependencies: []\n  - isJson: true\n- Register the global instance of the service as a transformer with the cybertron-service: `cybertronService.register(this, false)`", "source": "# MarkdownCode > services > transformer-base service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "ResultCacheService", "value": "", "source": "# MarkdownCode > services > result-cache service"}]
