# MarkdownCode > components > main window
[{"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}]
# MarkdownCode > components > toolbar
[]
# MarkdownCode > components > toolbar > home
[{"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}]
# MarkdownCode > components > toolbar > home > file section
[{"class_name": "DialogService", "value": "- `dialogService.showOpenDialog()`: This is used to show a dialog box to select a file when the 'open' button is clicked.\n- `dialogService.showSaveDialog()`: This is used to show a save-as dialog when the 'save' button is clicked and the project file does not yet have a filename. It is also used when the 'save as' button is clicked.", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "StorageService", "value": "- `storageService.new()`: This is a function call related to the 'New Project' button. It is used to create a new project.\n- Storage-service is used to open a file when the 'Open' button is clicked.\n- The 'Save' button uses the storage-service 'save' function with filename as a parameter if the user provides a valid filename. If the project service already has a filename, the storage-service 'save' function is called without a parameter.\n- The 'Save As' button asks the storage-service to save the project to a new location if the user selects a file.", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "ProjectService", "value": "- ProjectService is used to check if there is a project loaded with changes (`projectService.isDirty == true`).\n- ProjectService is used to check if it has a filename for the project.\n- ProjectService's `isDirty` status is used to enable the 'save' and 'save as' buttons.\n- ProjectService is used to update the auto-save state.\n- The state of the 'auto-save' toggle button follows that of the ProjectService's auto-save state.\n- ProjectService needs to be monitored for changes so that the state of the buttons can be updated (field: eventTarget, event: 'is-dirty-changed').", "source": "# MarkdownCode > services > project service"}]
# MarkdownCode > components > toolbar > home > edit section
[{"class_name": "SelectionService", "value": "- Cut: a button to initiate the cut command of the selection service. It is enabled when the selection service has any data marked as selected.\n- Copy: a button to initiate the copy command of the selection service. It is enabled when the selection service has any data marked as selected.\n- Paste: a button to initiate the paste command of the selection service. It is enabled when the clipboard contains text data.\n- Delete: a button to initiate the delete command of the selection service. It is enabled when the selection service has any data marked as selected.\n- Clear selection: a button to clear the current selection buffer. It is enabled when the selection service has any data marked as selected.", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}]
# MarkdownCode > components > toolbar > home > undo section
[{"class_name": "UndoService", "value": "- The undo-section component contains actions that the undo / redo service can perform.\n- Undo: a button to undo the last action, performed by the current project's undo-service\n  - Enabled when the project's undo-service has undo actions\n- Redo: a button to redo the last action, preformed by the project's undo service.\n  - Enabled when the undo-service has redo actions", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "ThemeService", "value": "", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "StorageService", "value": "", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "ConstantExtractorService", "value": "", "source": "# MarkdownCode > services > transformers > constant-extractor service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}]
# MarkdownCode > components > toolbar > transformers
[]
# MarkdownCode > components > toolbar > transformers > transformers-configuration section
[{"class_name": "CybertronService", "value": "- Transformers found in `cybertronService.entryPoints`\n- The selected item in the dropdown list comes from `cyberTronService.activeEntryPoint`", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "PluginListRendererService", "value": "", "source": "# MarkdownCode > services > transformers > plugin-list renderer service"}]
# MarkdownCode > components > toolbar > transformers > build section
[{"class_name": "BuildService", "value": "- The build-section component contains actions that the build-service can perform.\n- It contains the following actions:\n  - All: a button to start rendering all the code for the entire project. It calls `build-service.buildAll()`.\n  - Code for active fragment: a button to start rendering all the code files for the currently active fragment. It calls `build-service.buildFragment(positionTrackingService.activeFragment)`.\n  - Active fragment with active transformer: a button to start rendering the result for the currently active fragment and transformer. It calls `build-service.runTransformer(positionTrackingService.activeFragment, positionTrackingService.activeTransformer)`.\n  - Debug: a toggle button, when pressed, asks the build-service to update the debug state. The toggle button's state follows that of the build-service's debug state.", "source": "# MarkdownCode > services > build service"}, {"class_name": "ProjectService", "value": "- The 'all' button is disabled when `project-service.isAnyFragmentOutOfDate() == false`.\n- Event handlers are registered to monitor for changes with `project-service` (field: eventTarget, event: fragment-out-of-date) to update the disabled state of the buttons.", "source": "# MarkdownCode > services > project service"}, {"class_name": "PositionTrackingService", "value": "- `positionTrackingService.activeFragment?.isOutOfDate` is used to determine if the 'code for active fragment' button is disabled.\n- `build-service.buildFragment(positionTrackingService.activeFragment)` is called when the 'code for active fragment' button is clicked.\n- `!positionTrackingService.activeFragment || !positionTrackingService.activeTransformer` is used to determine if the 'active fragment with active transformer' button is disabled.\n- `build-service.runTransformer(positionTrackingService.activeFragment, positionTrackingService.activeTransformer)` is called when the 'active fragment with active transformer' button is clicked.\n- Event handlers are registered to monitor for changes with the position-tracking service (field: eventTarget, event: change) to update the disabled state of the buttons.", "source": "# MarkdownCode > services > position-tracking service"}]
# MarkdownCode > components > toolbar > format
[{"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}]
# MarkdownCode > components > toolbar > format > style section
[{"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "SelectionService", "value": "- The selection-service is used to assign a different formatting style to the currently selected text when a button is pressed.\n- The selection-service is monitored for changes in the currently selected text.\n- Whenever the text selection is changed, the state of the toggle buttons is updated to reflect the style of the currently selected text.\n- The selection service provides a method for retrieving the style of the currently selected text.", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "PositionTrackingService", "value": "", "source": "# MarkdownCode > services > position-tracking service"}]
# MarkdownCode > components > toolbar > format > paragraph section
[{"class_name": "SelectionService", "value": "- The SelectionService performs the action of increasing the indent of the current line or selection.\n- The SelectionService performs the action of decreasing the indent of the current line or selection.", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}]
# MarkdownCode > components > toolbar > format > font section
[{"class_name": "SelectionService", "value": "- The text selection is changed in the selection-service.\n- The state of the toggle buttons is updated to reflect the state of the selected text when the text selection is changed in the selection-service.", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "PositionTrackingService", "value": "", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}]
# MarkdownCode > components > toolbar > preferences
[{"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}]
# MarkdownCode > components > toolbar > preferences > GPT section
[{"class_name": "DialogService", "value": "", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "UndoService", "value": "", "source": "# MarkdownCode > services > Undo service"}, {"class_name": "PositionTrackingService", "value": "", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "GptService", "value": "- The GPT-section component contains actions related to the configuration of the GPT service.\n- The list of available models used to populate the combobox comes from the gpt-service.\n- The initial value for the combobox is obtained from the gpt-service.\n- When the value is changed, it is saved to the gpt-service.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "CompressService", "value": "", "source": "# MarkdownCode > services > transformers > compress service"}, {"class_name": "ThemeService", "value": "", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "GPTService", "value": "- The GPT-section component contains actions related to the configuration of the GPT service.\n- The list of available models used to populate the ModelComboBox component comes from the gpt-service.\n- The initial value for the ModelComboBox component is gotten from the gpt-service (getDefaultModel function).\n- When the value of the ModelComboBox component is changed, it is saved to the gpt-service (setDefaultModel function).", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "TransformerBaseService", "value": "", "source": "# MarkdownCode > services > transformer-base service"}, {"class_name": "StorageService", "value": "", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}]
# MarkdownCode > components > toolbar > preferences > open-ai configuration dialog
[{"class_name": "DialogService", "value": "", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "GptService", "value": "- The current value of the api-key is retrieved from the gpt-service and shown in the input box when the dialog box opens.\n- The new api-key value is saved to the gpt-service when the 'ok' button is clicked.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "GPTService", "value": "- The current value of the api-key is retrieved from the gpt-service when the dialog box opens.\n- The new api-key value is saved to the gpt-service when the 'ok' button is clicked.", "source": "# MarkdownCode > services > gpt service"}]
# MarkdownCode > components > toolbar > preferences > view section
[{"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "ThemeService", "value": "- ThemeService manages the currently selected theme.\n- The preferred color mode (light or dark) is linked to the value of the ThemeService.\n- The selected font for the markdown text is linked to the value of the ThemeService.\n- The selected font size for the markdown text is also linked to the value of the ThemeService.", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "FolderService", "value": "", "source": "# MarkdownCode > services > folder service"}, {"class_name": "ConstantExtractorService", "value": "", "source": "# MarkdownCode > services > transformers > constant-extractor service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}, {"class_name": "PluginListRendererService", "value": "", "source": "# MarkdownCode > services > transformers > plugin-list renderer service"}]
# MarkdownCode > components > body
[]
# MarkdownCode > components > body > editor
[{"class_name": "ThemeService", "value": "- Theme (convert light to vs-light or dark to vs-dark), font & font-size are retrieved from the theme-service and applied to the monaco editor.\n- Subscribe to the theme-service for changes `themeService.subscribe(this.handleThemeChanged)` upon construction and unsubscribe upon destruction `themeService.unsubscribe(this.handleThemeChanged)`.\n- If there is no this.editorRef.current, return.\n- Update the options of the editor, call `this.editorRef.current.updateOptions(newOptions)`.", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "SelectionService", "value": "- onDidFocusEditorWidget: store a reference to the monaco editor in the selection service to indicate so that it can work with the correct editor.\n- onDidBlurEditorWidget: if the selection service currently references this monaco editor, assign null to the selection service's editor reference.\n- onDidChangeCursorPosition: if the selection service currently references this monaco editor, ask the position-tracking service to update the current line with the new cursor position `setCurrentLine(e.position.lineNumber - 1)`\n- onDidChangeCursorSelection: if the selection service currently references this monaco editor, inform the subscribers of the selection-service that the selection has changed `selectionService.notifySubscribers()`", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "PositionTrackingService", "value": "- Whenever the position-tracking service raises the event 'moveTo', do: `this.editorRef.current.revealLineNearTop(e.detail)`\n- onDidChangeCursorPosition: if the selection service currently references this monaco editor, ask the position-tracking service to update the current line with the new cursor position `setCurrentLine(e.position.lineNumber - 1)`", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "DialogService", "value": "- In the event of an error during the processing of changes in the monaco editor's content, the DialogService is used to display an error dialog. This is done using the `dialogService.showErrorDialog(e)` method.", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "ChangeProcessorService", "value": "- The ChangeProcessorService is used to process changes in the content of the monaco editor. This is done in the 'onDidChangeModelContent' event handler. The changes and the editor are passed as arguments to the 'process' method of the ChangeProcessorService.", "source": "# MarkdownCode > services > project service > change-processor service"}, {"class_name": "ProjectService", "value": "- The text for the monaco editor is retrieved from the project service (`projectService.content`).\n- Whenever the project service triggers the 'content-changed' event, the editor will reload the text.\n- Register using `projectService.eventTarget.addEventListener('content-changed', handleContentChanged)`.", "source": "# MarkdownCode > services > project service"}]
# MarkdownCode > components > body > outline
[{"class_name": "SelectionService", "value": "", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "LineParserHelpers", "value": "", "source": "# MarkdownCode > services > line parser > line parser helpers"}, {"class_name": "FolderService", "value": "", "source": "# MarkdownCode > services > folder service"}, {"class_name": "CompressService", "value": "", "source": "# MarkdownCode > services > transformers > compress service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "ProjectService", "value": "- The project-service raises the 'content-changed' event to indicate that a new project was loaded.\n- The project data is retrieved from the project-service and converted into a tree structure using the function 'convertToTreeData'.\n- The project service raises an event that a data item was removed (event: fragment-deleted).\n- The project service raises an event that a data item was added (fragment-inserted) or (multiple) item(s) were changed (the event 'key-changed').\n- The component registers to the project service using `projectService.subscribe('content-changed', handleContentChanged)`.", "source": "# MarkdownCode > services > project service"}, {"class_name": "LineParser", "value": "", "source": "# MarkdownCode > services > line parser"}, {"class_name": "PositionTrackingService", "value": "- When the user selects a tree item, the key of the first selected item is assigned to the position-tracking service's activeFragment.\n- This component monitors the position-tracking service for changes to the currently selected text-fragment.\n- Use `positionTrackingService.subscribe(eventHandler)` to attach the event handler.\n- When the position changes, set the tree's selectedKeys property to the key of the selected text-fragment so that the corresponding tree node becomes selected.", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "StorageService", "value": "", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "ChangeProcessorService", "value": "", "source": "# MarkdownCode > services > project service > change-processor service"}]
# MarkdownCode > components > body > fragment-status icon
[{"class_name": "ProjectService", "value": "- Upon construction, an event handler is registered with the project-service (prop: eventTarget) to handle certain events. This event handler is unregistered when unloading.\n- The events handled by the project-service include:\n  - `fragment-out-of-date`: If `e.detail === fragment?.key`, the color of the icon and content of the tooltip are refreshed when the event is triggered.\n  - `key-changed`: If `e.detail?.key === fragment?.key`, the icon used is refreshed based on the new value for `fragment?.level`.", "source": "# MarkdownCode > services > project service"}]
# MarkdownCode > components > body > results view
[{"class_name": "CybertronService", "value": "- The user can view the results that were generated by the transformers that were registered with the cybertron-service, for the currently selected text block.\n- For each transformer in the transformers list provided by the cybertron-service (field: transformers), this view creates a tab.", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "PositionTrackingService", "value": "- When a tab gets selected, the method `positionTrackingService.setActiveTransformer(transformer)` is called.\n- When first initialized, the selected tab is set to the first item in the list and `positionTrackingService.setActiveTransformer(transformer)` is called for the correct transformer (first in the list).", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "PluginListRendererService", "value": "", "source": "# MarkdownCode > services > transformers > plugin-list renderer service"}]
# MarkdownCode > components > body > results view > transformer-status icon
[{"class_name": "ProjectService", "value": "- Upon construction, an event handler is registered with the project-service (prop: eventTarget) to handle the following events (Unregister when unloading):\n  - `fragment-out-of-date`: \n    - if `e.detail === positionTrackingService.activeFragment?.key` then refresh the status\n  - `fragment-building`:\n    - if `e.detail?.fragment?.key === positionTrackingService.activeFragment?.key` then refresh the status\n  - `fragment-up-to-date`:\n    - if `e.detail === positionTrackingService.activeFragment?.key` then refresh the status", "source": "# MarkdownCode > services > project service"}, {"class_name": "PositionTrackingService", "value": "- Upon construction, an event handler is registered with the position-tracking-service (prop: eventTarget) to handle the `change` event.\n- The `fragment-out-of-date`, `fragment-building`, and `fragment-up-to-date` events in the project-service check if `e.detail` or `e.detail?.fragment?.key` matches `positionTrackingService.activeFragment?.key` to refresh the status.\n- The 'building' state shows a spin component when `positionTrackingService.activeFragment?.isBuilding`.\n- The 'overwritten' state checks if `transformer.cache.isOverwritten(positionTrackingService.activeFragment?.key)` or `transformer.cache.isOutOfDate(positionTrackingService.activeFragment?.key)`.\n- The 'rendered' state checks if `transformer.cache.isOutOfDate(positionTrackingService.activeFragment?.key)`.\n- The 'not yet rendered' state checks if `!transformer.cache.getResult(positionTrackingService.activeFragment?.key)`.", "source": "# MarkdownCode > services > position-tracking service"}]
# MarkdownCode > components > body > results view > results view tab
[{"class_name": "ThemeService", "value": "- theme (light or dark), font & font-size are retrieved from the theme-service and applied to the monaco editor.", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "SelectionService", "value": "- When the results-view-tab is loaded, a reference to the monaco editor is stored in the selection service to indicate so that it can work with the correct editor.\n- The selection service's editor reference is set to null when the monaco editor is blurred.\n- The selection service is informed about changes in cursor selection if it currently references the monaco editor.\n- The selection service is used to monitor changes in the currently selected text-fragment.", "source": "# MarkdownCode > services > Selection service"}, {"class_name": "PositionTrackingService", "value": "- The 'PositionTrackingService' is used to track the active transformer in the 'onDidFocusEditorWidget' event of the monaco editor.\n- The component monitors the 'PositionTrackingService' (field: eventTarget, event: change) for changes to the currently selected text-fragment.", "source": "# MarkdownCode > services > position-tracking service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}]
# MarkdownCode > components > body > results view > results view context menu
[{"class_name": "ThemeService", "value": "", "source": "# MarkdownCode > services > Theme service"}, {"class_name": "DialogService", "value": "", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "GPTService", "value": "- The gpt-service provides a list of available models for the menu items.\n- The gpt-service is used to get the value for the current model, registered for the current transformer. This is done using the method `gptService.getModelForFragment(transformer)`.\n- The gpt-service is asked to update the model-name used for the transformer when another model is selected. This is done using the method `gptService.setModelForFragment(model, transformer)`.\n- The gpt-service is used to get the value for the current model, registered under the name of the current transformer and current key. This is done using the method `gptService.setModelForFragment(transformer, key)`.\n- The gpt-service is asked to update the model-name of the transformer and the current title when another model is selected. This is done using the method `gptService.setModelForFragment(model, transformer, key)`.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}, {"class_name": "PluginListRendererService", "value": "", "source": "# MarkdownCode > services > transformers > plugin-list renderer service"}]
# MarkdownCode > services > dialog service
[]
# MarkdownCode > services > Theme service
[]
# MarkdownCode > services > project service
[{"class_name": "CybertronService", "value": "The source text does not provide any information specifically related to 'CybertronService'.", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "DialogService", "value": "The source text mentions 'DialogService' in the context of the 'tryAddToOutOfDate' function. Specifically, it is used to show an error when a fragment with a specified key cannot be found: `dialogService.showError('Unknown key: ' + key)`.", "source": "# MarkdownCode > services > dialog service"}]
# MarkdownCode > services > project service > project configuration service
[]
# MarkdownCode > services > project service > storage service
[{"class_name": "FolderService", "value": "- clear(): makes certain all references to data that was previously loaded, is cleared\n  ```python (pseudo)\n  folderService.clear()\n  ```\n- open(filePath): load all the data from disk \n  ```python (pseudo)\n  folderService.setLocation(filePath)\n  ```\n- save(file): saves the project to disk\n  ```python (pseudo)\n  if not projectService.filename:\n    folderService.moveTo(file)\n  elif projectService.filename != file:\n    folderService.copyTo(file)\n  ```", "source": "# MarkdownCode > services > folder service"}, {"class_name": "CybertronService", "value": "- In the `clear()` function, for each transformer in `cybertronService.transformers`, the cache is cleared.\n- In the `open(filePath)` function, for each transformer in `cybertronService.transformers`, the cache is loaded.\n- In the `updateOutOfDate()` function, for each transformer in `cybertronService.transformers`, it checks if the transformer cache is out of date for each text fragment. If all transformers are out of date, the text fragment is marked as out of date. If some transformers are out of date, they are added to the `outOfDateTransformers` list for the text fragment.\n- In the `save(file)` function, for each transformer in `cybertronService.transformers`, the cache is saved to a file.", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "LineParser", "value": "- lineParser.clear() is called in the clear() function.\n- lineParser.parse(line, index) is called in the open(filePath) function, where it parses each line of the content.", "source": "# MarkdownCode > services > line parser"}, {"class_name": "GPTService", "value": "- `gptService.modelsMap = {}` in the `clear()` function: This line of code clears the models map in the GPTService.\n- `gptService.modelsMap` in the `loadModelsMap(filePath)` function: This function loads a JSON file that defines the models to be used with the project and assigns the parsed JSON to `gptService.modelsMap`.\n- `gptService.modelsMap` in the `saveModelsMap(file)` function: This function saves the models map to a JSON file. It converts the JSON object in `gptService.modelsMap` to a string and saves the stringified JSON to the JSON file.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "ProjectService", "value": "- ProjectService.textFragments\n- ProjectService.content\n- ProjectService.blockEvents\n- ProjectService.dispatchEvent('content-changed')\n- ProjectService.filename\n- ProjectService.autoSave\n- Functions:\n  - clear()\n  - new()\n  - open(filePath)\n  - loadModelsMap(filePath)\n  - updateOutOfDate()\n  - markDirty()\n  - save(file)\n  - saveModelsMap(file)", "source": "# MarkdownCode > services > project service"}, {"class_name": "ProjectConfigurationService", "value": "- `projectConfigurationService.config = {}` in the `clear()` function: This line of code clears the configuration of the project.\n- `this.loadProjectConfig(filePath)` in the `open(filePath)` function: This line of code loads the project configuration from a JSON file.\n- `projectConfigurationService.config` in the `loadProjectConfig(filePath)` function: This line of code assigns the parsed JSON from the configuration file to the project configuration service.\n- `this.saveProjectConfig(file)` in the `save(file)` function: This line of code saves the project configuration to a JSON file.\n- `projectConfigurationService.config` in the `saveProjectConfig(file)` function: This line of code converts the project configuration to a string and saves it to a JSON file.", "source": "# MarkdownCode > services > project service > project configuration service"}]
# MarkdownCode > services > project service > change-processor service
[{"class_name": "StorageService", "value": "- storageService.markDirty() function call in the process function.", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "ProjectService", "value": "The source text mentions 'ProjectService' in the following context:\n\n- The 'ProjectService' is kept in sync with the user edits by the function 'process(changes, full)'. This function updates the 'ProjectService' content with the value from the editor.", "source": "# MarkdownCode > services > project service"}, {"class_name": "LineParser", "value": "- `lineParser.parse(model.getLineContent(curLine + 1), curLine)`\n- `lineParser.deleteLine(curLine)`\n- `LineParser.insertLine(model.getLineContent(curLine + 1), curLine)`", "source": "# MarkdownCode > services > line parser"}]
# MarkdownCode > services > folder service
[{"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "StorageService", "value": "", "source": "# MarkdownCode > services > project service > storage service"}, {"class_name": "ChangeProcessorService", "value": "", "source": "# MarkdownCode > services > project service > change-processor service"}, {"class_name": "ConstantExtractorService", "value": "", "source": "# MarkdownCode > services > transformers > constant-extractor service"}]
# MarkdownCode > services > Selection service
[]
# MarkdownCode > services > Undo service
[]
# MarkdownCode > services > line parser
[{"class_name": "LineParserHelpers", "value": "- lineParserHelpers.handleEmptyLine(this, index)\n- lineParserHelpers.handleTitleLine(this, line, index)\n- lineParserHelpers.handleRegularLine(this, line, index)\n- lineParserHelpers.deleteLine(index)", "source": "# MarkdownCode > services > line parser > line parser helpers"}, {"class_name": "ProjectService", "value": "- The project-service stores the text-fragments updated by the line-parser service.\n- The line-parser service asks the project-service to add the text-fragment in its list of text-fragments using the method projectService.addTextFragment(textFragment, index).\n- The calculateKey function in the line-parser service retrieves a text-fragment that the project-service has at a certain position 'idx'.", "source": "# MarkdownCode > services > project service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}, {"class_name": "PluginListRendererService", "value": "", "source": "# MarkdownCode > services > transformers > plugin-list renderer service"}]
# MarkdownCode > services > line parser > line parser helpers
[{"class_name": "ProjectService", "value": "- projectService.eventTarget.dispatchEvent(new CustomEvent('key-changed', { detail: eventParams } ))\n- projectService.textFragments.indexOf(fragment)\n- projectService.deleteTextFragment(fragment)\n- projectService.markOutOfDate(prevFragment)\n- projectService.markOutOfDate(fragment)\n- projectService.textFragments.length\n- projectService.textFragments.indexOf(fragment)", "source": "# MarkdownCode > services > project service"}, {"class_name": "TripleCompressService", "value": "", "source": "# MarkdownCode > services > transformers > triple-compress service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}, {"class_name": "PluginListRendererService", "value": "", "source": "# MarkdownCode > services > transformers > plugin-list renderer service"}]
# MarkdownCode > services > position-tracking service
[{"class_name": "LineParser", "value": "- The line-parser service is used in the method for setting the currently selected line. It is used to get the object at the line-index position found on the fragmentsIndex array.\n- The method setActiveFragment uses lineParser to get the start line of a fragment.", "source": "# MarkdownCode > services > line parser"}]
# MarkdownCode > services > gpt service
[{"class_name": "DialogService", "value": "", "source": "# MarkdownCode > services > dialog service"}, {"class_name": "PluginListRendererService", "value": "", "source": "# MarkdownCode > services > transformers > plugin-list renderer service"}]
# MarkdownCode > services > result-cache service
[{"class_name": "FolderService", "value": "- the location of the file (folder) is provided by folder-service.cache", "source": "# MarkdownCode > services > folder service"}, {"class_name": "CybertronService", "value": "", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "ProjectService", "value": "- ProjectService is used to register the event handler 'handleKeyChanged' to monitor when the key of a fragment changes. This is done using the pseudo code: `projectService.eventTarget.addEventListener('fragment-deleted', handleKeyChanged)`\n- ProjectService is used to register the event handler 'handleFragmentDeleted' to monitor when a fragment is deleted. This is done using the pseudo code: `projectService.eventTarget.addEventListener('key-changed', handleFragmentDeleted)`\n- ProjectService is used to register an event handler to monitor when text fragments have changed. This is done using the pseudo code: `projectService.eventTarget.addEventListener('fragment-out-of-date', handleTextFragmentChanged)`\n- The function 'tryAddToOutOfDate' of the ProjectService is called within the event handler when it is triggered. The pseudo code for this is: `projectService.tryAddToOutOfDate(fragmentKey, this.transformer)`", "source": "# MarkdownCode > services > project service"}, {"class_name": "component-lister service", "value": "", "source": "# MarkdownCode > services > transformers > component-lister service"}, {"class_name": "PluginListRendererService", "value": "", "source": "# MarkdownCode > services > transformers > plugin-list renderer service"}]
# MarkdownCode > services > build service
[{"class_name": "CybertronService", "value": "The source text does not provide any information specifically related to 'CybertronService'.", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "ProjectService", "value": "", "source": "# MarkdownCode > services > project service"}, {"class_name": "BuildStackService", "value": "", "source": "# MarkdownCode > services > build-stack service"}, {"class_name": "TransformerBaseService", "value": "", "source": "# MarkdownCode > services > transformer-base service"}]
# MarkdownCode > services > build-stack service
[{"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}]
# MarkdownCode > services > cybertron service
[{"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "BuildStackService", "value": "", "source": "# MarkdownCode > services > build-stack service"}, {"class_name": "AllSparkService", "value": "", "source": "# MarkdownCode > services > all-spark service"}]
# MarkdownCode > services > all-spark service
[{"class_name": "CybertronService", "value": "- CybertronService is used for registering transformers created by the all-spark service.\n- Transformers are registered into the CybertronService using the `cybertronService.register(transformer, false)` function.\n- Transformers can be registered as an entry point using the `cybertronService.register(transformer, true)` function.\n- Every transformer is registered after construction so that it can be found in the list by other transformers.", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "CompressService", "value": "- transformers to create:\n  - compress service (entry point)", "source": "# MarkdownCode > services > transformers > compress service"}, {"class_name": "ConstantExtractorService", "value": "- constant-extractor service is one of the transformers to be created by the all-spark service.", "source": "# MarkdownCode > services > transformers > constant-extractor service"}, {"class_name": "double-compress-service", "value": "- double-compress service is one of the transformers to be created by the all-spark service.", "source": "# MarkdownCode > services > transformers > double-compress service"}, {"class_name": "PluginTransformerService", "value": "- The PluginTransformerService is created for every transformer definition in the getPlugins() function.\n- The PluginTransformerService is created with a constructor parameter 'pluginObj', which is obtained from the loadPlugin(transformerDef) function.\n- The PluginTransformerService is registered using the cybertronService.register() function. To determine if it's an entry-point, 'pluginTransformer.isEntryPoint' is used.", "source": "# MarkdownCode > services > transformers > plugin-transformer service"}, {"class_name": "PluginRendererService", "value": "- plugin-renderer service is created during the load function of the all-spark service.\n- plugin-renderer service is registered as an entry point with the cybertron-service.", "source": "# MarkdownCode > services > transformers > plugin-renderer service"}]
# MarkdownCode > services > transformer-base service
[{"class_name": "CybertronService", "value": "", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "BuildStackService", "value": "- In the function `get-result(key)`, `buildStackService.tryRegister(this.name, fragment.key)` is used to prevent circular references during the process.\n- In the same function, `buildStackService.unregister(this, fragment.key)` is used to unregister the current object and key from the `buildStackService` after the result is rendered.", "source": "# MarkdownCode > services > build-stack service"}, {"class_name": "ResultCacheService", "value": "- The transformer-base service uses a result-cache-service (field: cache) to store all the results and keep track of when the build has gone out-of-date. \n  - constructor params:\n    - transformer = this\n    - dependencies = this.dependencies\n- Functions:\n  - render-result(pseudo):\n    ```python (pseudo)\n    def renderResult(textFragment):\n      message, keys = await this.buildMessage(textFragment)\n      if not message: \n        return None\n      result = await GPT-service.sendRequest(this.name, textFragment.key, message) # need name and key so the gpt service can select the correct model\n      key = ' | '.join(keys)\n      this.cache.setResult(key, result)\n      return result\n    ```\n  - get-result(key): get an up-to-date result value for the specified key. Use the cache when possible.\n    ```python (pseudo)\n    async def getResult(fragment):\n      if not this.cache.isOutOfDate(fragment.key):\n        return this.cache.getFragmentResults(fragment.key)\n      if not buildStackService.tryRegister(this.name, fragment.key):\n        return # circular reference, not good, stop the process\n      try:\n        result = await this.renderResult(fragment)\n        return result\n      finally:\n        buildStackService.unregister(this, fragment.key)\n    ```", "source": "# MarkdownCode > services > result-cache service"}, {"class_name": "GPTService", "value": "In the function 'render-result', there is a call to GPT-service.sendRequest(this.name, textFragment.key, message). This is used to select the correct model based on the name and key. The result from this request is then stored in the cache.", "source": "# MarkdownCode > services > gpt service"}]
# MarkdownCode > services > transformers > constant-extractor service
[{"class_name": "TransformerBaseService", "value": "- Inherits from transformer-base service\n- Constructor parameters:\n  - name: 'constants'\n  - dependencies: []\n  - isJson: true\n- Register the global instance of the service as a transformer with the cybertron-service: `cybertronService.register(this, false)`", "source": "# MarkdownCode > services > transformer-base service"}, {"class_name": "BuildService", "value": "", "source": "# MarkdownCode > services > build service"}, {"class_name": "ResultCacheService", "value": "", "source": "# MarkdownCode > services > result-cache service"}, {"class_name": "AllSparkService", "value": "", "source": "# MarkdownCode > services > all-spark service"}]
# MarkdownCode > services > transformers > plugin-transformer service
[{"class_name": "FolderService", "value": "- folderService is declared as a part of the plugin.services object in the constructor of the plugin-transformer service.", "source": "# MarkdownCode > services > folder service"}, {"class_name": "CybertronService", "value": "- cybertronService is included in the plugin.services object in the constructor of the plugin-transformer service.", "source": "# MarkdownCode > services > cybertron service"}, {"class_name": "GPTService", "value": "- In the constructor of the plugin-transformer service, `gptService` is declared as a part of `plugin.services`.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "ProjectService", "value": "- In the constructor of the plugin-transformer service, `projectService` is included in the `plugin.services` object.", "source": "# MarkdownCode > services > project service"}, {"class_name": "TransformerBaseService", "value": "- Inherits from transformer-base service.\n- Uses the transformer-base service's `calculateMaxTokens` method if the plugin does not have a `calculateMaxTokens` function.\n- Uses the transformer-base service's `renderResult` method if the plugin does not have a `renderResult` function.", "source": "# MarkdownCode > services > transformer-base service"}, {"class_name": "PluginListRendererService", "value": "", "source": "# MarkdownCode > services > transformers > plugin-list renderer service"}]
# MarkdownCode > services > transformers > plugin-renderer service
[{"class_name": "FolderService", "value": "The source text does not provide any information specifically related to 'FolderService'.", "source": "# MarkdownCode > services > folder service"}, {"class_name": "GPTService", "value": "- In the function `renderResult(fragment)`, there is a call to `GPTService.sendRequest(this, fragment.key, message)`. This suggests that GPTService has a method called `sendRequest` which takes three parameters: the current instance, a key from a fragment, and a message.", "source": "# MarkdownCode > services > gpt service"}, {"class_name": "TransformerBaseService", "value": "- Inherits from transformer-base service\n- Constructor parameters for transformer-base:\n  - name: 'plugin renderer'\n  - dependencies: ['constants']\n  - isJson: false\n- Set during construction: `this.constantsService = this.dependencies[0]`", "source": "# MarkdownCode > services > transformer-base service"}]
# MarkdownCode > services > transformers > plugin-list renderer service
[{"class_name": "FolderService", "value": "", "source": "# MarkdownCode > services > folder service"}, {"class_name": "TransformerBaseService", "value": "- Inherits from transformer-base service\n- Constructor parameters for transformer-base:\n  - name: 'plugin-list renderer'\n  - dependencies: ['plugin renderer']\n  - isJson: true\n- Set during construction: `this.pluginRendererService = this.dependencies[0]`", "source": "# MarkdownCode > services > transformer-base service"}]
